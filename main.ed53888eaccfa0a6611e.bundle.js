webpackJsonp([1],{0:function(n,t,l){n.exports=l("cDNt")},cDNt:function(n,t,l){"use strict";function e(n){return m._18(0,[m._15(402653184,1,{canvasRef:0}),(n()(),m._4(0,[[1,0],["pcmview",1]],null,0,"canvas",[["height","128"],["width","684"]],null,null,null,null,null)),(n()(),m._17(null,["\n"]))],null,null)}function u(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-pcmview",[],null,null,null,e,B)),m._2(245760,null,0,w,[C],null,null)],function(n,t){n(t,1,0)},null)}function i(n){return m._18(0,[(n()(),m._4(0,null,null,4,"div",[["class","item-info"]],null,null,null,null,null)),(n()(),m._17(null,["\n  "])),(n()(),m._4(0,null,null,1,"p",[],null,null,null,null,null)),(n()(),m._17(null,["",""])),(n()(),m._17(null,["\n"])),(n()(),m._17(null,["\n"])),(n()(),m._4(0,null,null,1,"app-pcmview",[],null,null,null,e,B)),m._2(245760,null,0,w,[C],null,null),(n()(),m._17(null,["\n"])),(n()(),m._4(0,null,null,14,"div",[["class","buttons"]],null,null,null,null,null)),(n()(),m._17(null,["\n  "])),(n()(),m._4(0,null,null,1,"button",[],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.onSkipBackward()&&e}return e},null,null)),(n()(),m._4(0,null,null,0,"i",[["class","fa fa-step-backward"]],null,null,null,null,null)),(n()(),m._17(null,["\n  "])),(n()(),m._4(0,null,null,2,"button",[],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.onTogglePlay()&&e}return e},null,null)),(n()(),m._4(0,null,null,1,"i",[],null,null,null,null,null)),m._2(278528,null,0,F.c,[m.t,m.u,m.k,m.E],{ngClass:[0,"ngClass"]},null),(n()(),m._17(null,["\n  "])),(n()(),m._4(0,null,null,1,"button",[],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.onStop()&&e}return e},null,null)),(n()(),m._4(0,null,null,0,"i",[["class","fa fa-stop"]],null,null,null,null,null)),(n()(),m._17(null,["\n  "])),(n()(),m._4(0,null,null,1,"button",[],null,[[null,"click"]],function(n,t,l){var e=!0,u=n.component;if("click"===t){e=!1!==u.onSkipForward()&&e}return e},null,null)),(n()(),m._4(0,null,null,0,"i",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),m._17(null,["\n"])),(n()(),m._17(null,["\n\n"]))],function(n,t){var l=t.component;n(t,7,0),n(t,16,0,l.classesPlayButton)},function(n,t){n(t,3,0,t.component.currentTitle)})}function r(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-player",[],null,null,null,i,L)),m._2(245760,null,0,A,[j,C],null,null)],function(n,t){n(t,1,0)},null)}function s(n){return m._18(0,[(n()(),m._4(0,null,null,1,"li",[],null,null,null,null,null)),(n()(),m._17(null,["",""])),(n()(),m._17(null,["\n\n"]))],null,function(n,t){n(t,1,0,t.component.playlistItem.file.name)})}function o(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-playlist-item",[],null,null,null,s,Z)),m._2(49152,null,0,N,[],null,null)],null,null)}function a(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-playlist-item",[],null,null,null,s,Z)),m._2(49152,null,0,N,[],{playlistItem:[0,"playlistItem"]},null)],function(n,t){n(t,1,0,t.context.$implicit)},null)}function c(n){return m._18(0,[(n()(),m._4(0,null,null,4,"ul",[],null,null,null,null,null)),(n()(),m._17(null,["\n  "])),(n()(),m.Y(16777216,null,null,1,null,a)),m._2(802816,null,0,F.d,[m.N,m.K,m.t],{ngForOf:[0,"ngForOf"]},null),(n()(),m._17(null,["\n"])),(n()(),m._17(null,["\n\n"]))],function(n,t){n(t,3,0,t.component.items)},null)}function p(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-playlist",[],null,null,null,c,q)),m._2(245760,null,0,G,[j],null,null)],function(n,t){n(t,1,0)},null)}function _(n){return m._18(0,[(n()(),m._4(0,null,null,1,"div",[],null,[[null,"dragover"],[null,"drop"]],function(n,t,l){var e=!0,u=n.component;if("dragover"===t){e=!1!==u.onDragOver(l)&&e}if("drop"===t){e=!1!==u.onFileDrop(l)&&e}return e},null,null)),(n()(),m._17(null,["Drop some MP3 here."])),(n()(),m._17(null,["\n"]))],null,null)}function h(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-dropzone",[],null,null,null,_,J)),m._2(49152,null,0,U,[j],null,null)],null,null)}function f(n){return m._18(0,[m._15(402653184,1,{canvasRef:0}),(n()(),m._4(0,[[1,0],["visualizer",1]],null,0,"canvas",[["height","128"],["width","960"]],null,null,null,null,null)),(n()(),m._17(null,["\n"]))],null,null)}function b(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-visualizer",[],null,null,null,f,Q)),m._2(114688,null,0,X,[C,m.z],null,null)],function(n,t){n(t,1,0)},null)}function y(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-player",[],null,null,null,i,L)),m._2(245760,null,0,A,[j,C],null,null),(n()(),m._17(null,["\n"])),(n()(),m._4(0,null,null,1,"app-playlist",[],null,null,null,c,q)),m._2(245760,null,0,G,[j],null,null),(n()(),m._17(null,["\n"])),(n()(),m._4(0,null,null,1,"app-dropzone",[],null,null,null,_,J)),m._2(49152,null,0,U,[j],null,null),(n()(),m._17(null,["\n"])),(n()(),m._4(0,null,null,1,"app-visualizer",[],null,null,null,f,Q)),m._2(114688,null,0,X,[C,m.z],null,null),(n()(),m._17(null,["\n\n"]))],function(n,t){n(t,1,0),n(t,4,0),n(t,10,0)},null)}function d(n){return m._18(0,[(n()(),m._4(0,null,null,1,"app-root",[],null,null,null,y,nn)),m._2(49152,null,0,P,[],null,null)],null,null)}Object.defineProperty(t,"__esModule",{value:!0});var g,m=l("/oeL"),v={production:!0},S=function(){function n(){}return n}(),P=function(){function n(){this.title="app"}return n}(),k=["app-visualizer[_ngcontent-%COMP%]{z-index:0}app-dropzone[_ngcontent-%COMP%], app-visualizer[_ngcontent-%COMP%]{bottom:0;height:128px;position:absolute;width:960px}app-dropzone[_ngcontent-%COMP%]{z-index:1}app-playlist[_ngcontent-%COMP%]{bottom:128px;overflow:auto;position:absolute;top:224px;width:960px}"],I=[".item-info[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4);height:128px;top:16px;width:228px}.buttons[_ngcontent-%COMP%], .item-info[_ngcontent-%COMP%]{position:absolute;left:16px}.buttons[_ngcontent-%COMP%]{top:160px}app-pcmview[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4);display:block;height:128px;position:absolute;right:16px;top:16px;width:684px}"],O=[""],x=l("gvep");!function(n){n[n.IDLE=0]="IDLE",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED",n[n.PLAYING=3]="PLAYING",n[n.PAUSED=4]="PAUSED",n[n.STOPPED=5]="STOPPED",n[n.FINISHED=6]="FINISHED"}(g||(g={}));var C=function(){function n(){this._isPlaying=!1,this._isStopped=!1,this._progOffset=0,this._progStart=0,this._bufferSubject=new x.BehaviorSubject(this._buffer),this._stateSubject=new x.BehaviorSubject(g.IDLE),this.buffer=this._bufferSubject.asObservable(),this.state=this._stateSubject.asObservable(),this._ctx=new AudioContext,this.analizer=this._ctx.createAnalyser(),this.analizer.smoothingTimeConstant=.7,this.analizer.fftSize=512,this.analizer.connect(this._ctx.destination)}return n.prototype.setAudioFile=function(n){var t=this,l=new FileReader;l.onload=function(n){t._ctx.decodeAudioData(n.target.result,t.initBuffer.bind(t))},l.readAsArrayBuffer(n),this._stateSubject.next(g.LOADING)},n.prototype.start=function(){this._buffer&&!this._isPlaying&&(this.initSource(),this._source.start(0,this._progOffset),this._progStart=Date.now(),this._isPlaying=!0,this._isStopped=!1,this._stateSubject.next(g.PLAYING))},n.prototype.stop=function(n){this._isPlaying&&(this._isPlaying=!1,this._isStopped=!0,this._source.stop(0),n?(this._progOffset=(Date.now()-this._progStart)/1e3+this._progOffset,this._stateSubject.next(g.PAUSED)):(this._progOffset=0,this._stateSubject.next(g.STOPPED)))},n.prototype.pause=function(){this.stop(!0)},n.prototype.initBuffer=function(n){var t=!1;this._isPlaying&&(t=!0,this.stop(!1)),this._buffer=n,this._bufferSubject.next(this._buffer),this._stateSubject.next(g.LOADED),t&&this.start()},n.prototype.initSource=function(){this._source&&this._source.disconnect(this.analizer),this._source=this._ctx.createBufferSource(),this._source.buffer=this._buffer,this._source.onended=this.onSourceEnded.bind(this),this._source.connect(this.analizer)},n.prototype.onSourceEnded=function(){this._isStopped||(this._progOffset=0,this._stateSubject.next(g.FINISHED)),this._isPlaying=!1},n.ctorParameters=function(){return[]},n}(),w=function(){function n(n){this.playbackService=n}return n.prototype.ngOnInit=function(){this._subPlaybackBuffer=this.playbackService.buffer.subscribe(this.onPlaybackBufferChange.bind(this))},n.prototype.ngOnDestroy=function(){this._subPlaybackBuffer.unsubscribe()},n.prototype.onPlaybackBufferChange=function(n){this._audioBuffer=n,this.drawCanvas()},n.prototype.drawCanvas=function(){if(this.canvasRef){var n=this.canvasRef.nativeElement.getContext("2d"),t=this.canvasRef.nativeElement.getBoundingClientRect(),l=t.height,e=t.width;if(n.save(),n.clearRect(0,0,e,l),this._audioBuffer){var u=this._audioBuffer.getChannelData(0),i=u.length,r=Math.floor(i/2048),s=e/2048;n.strokeStyle="rgb(37,56,102)",n.globalCompositeOperation="lighter",n.translate(0,l/2),n.lineWidth=1,n.beginPath();for(var o=0;o<2048;o++){var a=Math.floor(r*o),c=s*o,p=u[a]*l/2;n.moveTo(c,p),n.lineTo(c,-1*p)}}n.stroke(),n.restore()}},n.ctorParameters=function(){return[{type:C}]},n}(),D=[O],B=m._1({encapsulation:0,styles:D,data:{}}),z=(m.Z("app-pcmview",w,u,{},{},[]),function(){function n(n,t){this.file=n,this.itemId=t}return n}()),j=function(){function n(){this._items=[],this._idCounter=0,this._itemsSubject=new x.BehaviorSubject(this._items),this._currentItemSubject=new x.BehaviorSubject(this._currentItem),this.files=this._itemsSubject.asObservable(),this.currentFile=this._currentItemSubject.asObservable()}return n.prototype.addItems=function(n){for(var t=n.length,l=0;l<t;l++){var e=new z(n.item(l),this._idCounter++);this._items.push(e)}this._itemsSubject.next(this._items),this._currentItem||(this._currentItem=this._items[0],this._currentItemSubject.next(this._currentItem))},n.prototype.selectItem=function(n){var t=this._items.findIndex(function(t){return t.itemId===n});t>=0&&(this._currentItem=this._items[t],this._currentItemSubject.next(this._currentItem))},n.prototype.skipBy=function(n){if(this._currentItem){var t=this._currentItem.itemId,l=this._items.findIndex(function(n){return n.itemId===t});if(l>=0){var e=l+n;(e<0||e>=this._items.length)&&(e=0),this._currentItem=this._items[e],this._currentItemSubject.next(this._currentItem)}}},n.prototype.skipOneForward=function(){this.skipBy(1)},n.prototype.skipOneBackward=function(){this.skipBy(-1)},n}(),A=function(){function n(n,t){this.playlistService=n,this.playbackService=t,this.currentTitle="",this.currentDuration=0,this.currentSampleRate=0,this.isStereo=!1,this.classesPlayButton={fa:!0,"fa-play":!0,"fa-pause":!1}}return n.prototype.ngOnInit=function(){this._subPlaylistCurrentItem=this.playlistService.currentFile.subscribe(this.onPlaylistCurrentItemChange.bind(this)),this._subPlaybackBuffer=this.playbackService.buffer.subscribe(this.onPlaybackBufferChange.bind(this)),this._subPlaybackState=this.playbackService.state.subscribe(this.onPlaybackStateChange.bind(this))},n.prototype.ngOnDestroy=function(){this._subPlaylistCurrentItem.unsubscribe(),this._subPlaybackState.unsubscribe()},n.prototype.onTogglePlay=function(){this.classesPlayButton["fa-play"]?(this.playbackService.start(),this.classesPlayButton["fa-play"]=!1,this.classesPlayButton["fa-pause"]=!0):(this.playbackService.pause(),this.classesPlayButton["fa-play"]=!0,this.classesPlayButton["fa-pause"]=!1)},n.prototype.onStop=function(){this.playbackService.stop()},n.prototype.onSkipForward=function(){this.playlistService.skipOneForward()},n.prototype.onSkipBackward=function(){this.playlistService.skipOneBackward()},n.prototype.onPlaylistCurrentItemChange=function(n){n&&(this.currentTitle=n.file.name,this.playbackService.setAudioFile(n.file))},n.prototype.onPlaybackBufferChange=function(n){n&&(this.currentDuration=n.duration,this.currentSampleRate=n.sampleRate,this.isStereo=n.numberOfChannels>=2)},n.prototype.onPlaybackStateChange=function(n){},n.ctorParameters=function(){return[{type:j},{type:C}]},n}(),F=l("qbdv"),E=[I],L=m._1({encapsulation:0,styles:E,data:{}}),M=(m.Z("app-player",A,r,{},{},[]),[""]),R=[""],N=function(){function n(){}return n}(),T=[R],Z=m._1({encapsulation:0,styles:T,data:{}}),G=(m.Z("app-playlist-item",N,o,{playlistItem:"playlistItem"},{},[]),function(){function n(n){this.playlistService=n}return n.prototype.ngOnInit=function(){this.subscription=this.playlistService.files.subscribe(this.onFilesChange.bind(this))},n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.onFilesChange=function(n){this.items=n},n.ctorParameters=function(){return[{type:j}]},n}()),Y=[M],q=m._1({encapsulation:0,styles:Y,data:{}}),H=(m.Z("app-playlist",G,p,{},{},[]),["div[_ngcontent-%COMP%]{border-top:1px solid #969696;color:hsla(0,0%,59%,.4);font-size:2rem;height:128px;line-height:128px;text-align:center;vertical-align:middle}"]),U=function(){function n(n){this.playlist=n}return n.prototype.onDragOver=function(n){n.preventDefault()},n.prototype.onFileDrop=function(n){n.preventDefault();var t=n.dataTransfer.files;this.playlist.addItems(t)},n.ctorParameters=function(){return[{type:j}]},n}(),W=[H],J=m._1({encapsulation:0,styles:W,data:{}}),K=(m.Z("app-dropzone",U,h,{},{},[]),["[_nghost-%COMP%], canvas[_ngcontent-%COMP%]{display:block}canvas[_ngcontent-%COMP%]{width:100%}"]),X=function(){function n(n,t){this.playbackService=n,this.ngZone=t}return n.prototype.ngOnInit=function(){var n=this;this._ctx=this.canvasRef.nativeElement.getContext("2d");var t=this._ctx.createLinearGradient(0,0,0,128);t.addColorStop(1,"rgba(91,141,255,.9)"),t.addColorStop(0,"rgba(37,56,102,.2)"),this._ctx.fillStyle=t,this._analizer=this.playbackService.analizer,this._bufferLength=this._analizer.frequencyBinCount,this._dataArray=new Uint8Array(this._bufferLength),this.ngZone.runOutsideAngular(function(){return n.paintCanvas()})},n.prototype.paintCanvas=function(){var n,t=0,l=960;this._analizer.getByteFrequencyData(this._dataArray),this._ctx.clearRect(0,0,960,128);for(var e=0;e<this._bufferLength;e++)l-=2,n=this._dataArray[e]/2,this._ctx.fillRect(t,128-n,1.8,n),this._ctx.fillRect(l,128-n,1.8,n),t+=2;requestAnimationFrame(this.paintCanvas.bind(this))},n.ctorParameters=function(){return[{type:C},{type:m.z}]},n}(),$=[K],Q=m._1({encapsulation:0,styles:$,data:{}}),V=(m.Z("app-visualizer",X,b,{},{},[]),[k]),nn=m._1({encapsulation:0,styles:V,data:{}}),tn=m.Z("app-root",P,d,{},{},[]),ln=l("fc+i"),en=m._0(S,[P],function(n){return m._13([m._14(512,m.i,m.W,[[8,[tn]],[3,m.i],m.x]),m._14(5120,m.v,m._12,[[3,m.v]]),m._14(4608,F.f,F.e,[m.v]),m._14(4608,m.h,m.h,[]),m._14(5120,m.a,m._5,[]),m._14(5120,m.t,m._10,[]),m._14(5120,m.u,m._11,[]),m._14(4608,ln.b,ln.s,[F.b]),m._14(6144,m.H,null,[ln.b]),m._14(4608,ln.e,ln.f,[]),m._14(5120,ln.c,function(n,t,l,e){return[new ln.k(n),new ln.o(t),new ln.n(l,e)]},[F.b,F.b,F.b,ln.e]),m._14(4608,ln.d,ln.d,[ln.c,m.z]),m._14(135680,ln.m,ln.m,[F.b]),m._14(4608,ln.l,ln.l,[ln.d,ln.m]),m._14(6144,m.F,null,[ln.l]),m._14(6144,ln.p,null,[ln.m]),m._14(4608,m.L,m.L,[m.z]),m._14(4608,ln.g,ln.g,[F.b]),m._14(4608,ln.i,ln.i,[F.b]),m._14(4608,j,j,[]),m._14(4608,C,C,[]),m._14(512,F.a,F.a,[]),m._14(1024,m.l,ln.q,[]),m._14(1024,m.b,function(n,t){return[ln.r(n,t)]},[[2,ln.h],[2,m.y]]),m._14(512,m.c,m.c,[[2,m.b]]),m._14(131584,m._3,m._3,[m.z,m.X,m.r,m.l,m.i,m.c]),m._14(2048,m.e,null,[m._3]),m._14(512,m.d,m.d,[m.e]),m._14(512,ln.a,ln.a,[[3,ln.a]]),m._14(512,S,S,[])])});v.production&&Object(m.R)(),Object(ln.j)().bootstrapModuleFactory(en).catch(function(n){return console.log(n)})},gFIY:function(n,t){function l(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}l.keys=function(){return[]},l.resolve=l,n.exports=l,l.id="gFIY"}},[0]);